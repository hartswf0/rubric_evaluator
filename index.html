<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Rubric Evaluator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
    <div class="container mx-auto px-4 py-8 flex-grow">
        <div class="bg-white shadow-md rounded-lg p-6">
            <h1 class="text-2xl font-bold mb-6 text-center">Project Rubric Evaluator</h1>
            
            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-2" for="projectName">
                    Project Name
                </label>
                <input 
                    type="text" 
                    id="projectName" 
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    placeholder="Enter project name"
                >
            </div>

            <div id="rubricSections">
                <!-- Concept Section -->
                <div class="mb-6 concept-section">
                    <h2 class="text-xl font-semibold mb-4">Concept</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Concept Level</label>
                            <select 
                                class="concept-score shadow border rounded w-full py-2 px-3 text-gray-700 scoring-dropdown"
                                data-section="concept"
                                data-max="10"
                            >
                                <option value="10">High Concept (8-10 pts)</option>
                                <option value="9">High Concept (9 pts)</option>
                                <option value="8">High Concept (8 pts)</option>
                                <option value="7">Moderate Concept (7 pts)</option>
                                <option value="6">Moderate Concept (6 pts)</option>
                                <option value="5">Moderate Concept (5 pts)</option>
                                <option value="4">Moderate Concept (4 pts)</option>
                                <option value="3">Low Concept (3 pts)</option>
                                <option value="2">Low Concept (2 pts)</option>
                                <option value="1">Low Concept (1 pt)</option>
                                <option value="0">Low Concept (0 pts)</option>
                            </select>
                        </div>
                        <div class="col-span-2">
                            <label class="block text-gray-700 font-bold mb-2">Detailed Criteria</label>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <label class="text-sm">Purpose Clarity</label>
                                    <select class="w-full border rounded concept-subcriteria">
                                        <option value="3">Excellent</option>
                                        <option value="2">Good</option>
                                        <option value="1">Needs Improvement</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-sm">Audience Connection</label>
                                    <select class="w-full border rounded concept-subcriteria">
                                        <option value="3">Excellent</option>
                                        <option value="2">Good</option>
                                        <option value="1">Needs Improvement</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-sm">Innovation Level</label>
                                    <select class="w-full border rounded concept-subcriteria">
                                        <option value="3">Excellent</option>
                                        <option value="2">Good</option>
                                        <option value="1">Needs Improvement</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-sm">Project Scope</label>
                                    <select class="w-full border rounded concept-subcriteria">
                                        <option value="3">Excellent</option>
                                        <option value="2">Good</option>
                                        <option value="1">Needs Improvement</option>
                                    </select>
                                </div>
                            </div>
                            <textarea 
                                class="concept-notes mt-2 shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                rows="4"
                                placeholder="Specific notes about the concept"
                            ></textarea>
                            <div class="concept-generated-comments mt-2 text-sm text-gray-600 italic"></div>
                        </div>
                    </div>
                </div>

                <!-- Design Experience Section -->
                <div class="mb-6 design-section">
                    <h2 class="text-xl font-semibold mb-4">Design Experience</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Design Experience Level</label>
                            <select 
                                class="design-score shadow border rounded w-full py-2 px-3 text-gray-700 scoring-dropdown"
                                data-section="design"
                                data-max="10"
                            >
                                <option value="10">High Design (8-10 pts)</option>
                                <option value="9">High Design (9 pts)</option>
                                <option value="8">High Design (8 pts)</option>
                                <option value="7">Moderate Design (7 pts)</option>
                                <option value="6">Moderate Design (6 pts)</option>
                                <option value="5">Moderate Design (5 pts)</option>
                                <option value="4">Moderate Design (4 pts)</option>
                                <option value="3">Low Design (3 pts)</option>
                                <option value="2">Low Design (2 pts)</option>
                                <option value="1">Low Design (1 pt)</option>
                                <option value="0">Low Design (0 pts)</option>
                            </select>
                        </div>
                        <div class="col-span-2">
                            <label class="block text-gray-700 font-bold mb-2">Detailed Criteria</label>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <label class="text-sm">User Interaction</label>
                                    <select class="w-full border rounded design-subcriteria">
                                        <option value="3">Excellent</option>
                                        <option value="2">Good</option>
                                        <option value="1">Needs Improvement</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-sm">Visual Design</label>
                                    <select class="w-full border rounded design-subcriteria">
                                        <option value="3">Excellent</option>
                                        <option value="2">Good</option>
                                        <option value="1">Needs Improvement</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-sm">Experience Value</label>
                                    <select class="w-full border rounded design-subcriteria">
                                        <option value="3">Excellent</option>
                                        <option value="2">Good</option>
                                        <option value="1">Needs Improvement</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-sm">Usability</label>
                                    <select class="w-full border rounded design-subcriteria">
                                        <option value="3">Excellent</option>
                                        <option value="2">Good</option>
                                        <option value="1">Needs Improvement</option>
                                    </select>
                                </div>
                            </div>
                            <textarea 
                                class="design-notes mt-2 shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                rows="4"
                                placeholder="Specific notes about design experience"
                            ></textarea>
                            <div class="design-generated-comments mt-2 text-sm text-gray-600 italic"></div>
                        </div>
                    </div>
                </div>

                <!-- Implementation Section -->
                <div class="mb-6 implementation-section">
                    <h2 class="text-xl font-semibold mb-4">Implementation</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-gray-700 font-bold mb-2">Implementation Level</label>
                            <select 
                                class="implementation-score shadow border rounded w-full py-2 px-3 text-gray-700 scoring-dropdown"
                                data-section="implementation"
                                data-max="3"
                            >
                                <option value="3">High Implementation (3 pts)</option>
                                <option value="2.5">High Implementation (2.5 pts)</option>
                                <option value="2">Moderate Implementation (2 pts)</option>
                                <option value="1.5">Moderate Implementation (1.5 pts)</option>
                                <option value="1">Low Implementation (1 pt)</option>
                                <option value="0.5">Low Implementation (0.5 pts)</option>
                                <option value="0">Low Implementation (0 pts)</option>
                            </select>
                        </div>
                        <div class="col-span-2">
                            <label class="block text-gray-700 font-bold mb-2">Detailed Criteria</label>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <label class="text-sm">Code Quality</label>
                                    <select class="w-full border rounded implementation-subcriteria">
                                        <option value="1">Excellent</option>
                                        <option value="0.75">Good</option>
                                        <option value="0.5">Needs Improvement</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-sm">Error Handling</label>
                                    <select class="w-full border rounded implementation-subcriteria">
                                        <option value="1">Excellent</option>
                                        <option value="0.75">Good</option>
                                        <option value="0.5">Needs Improvement</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-sm">Documentation</label>
                                    <select class="w-full border rounded implementation-subcriteria">
                                        <option value="1">Excellent</option>
                                        <option value="0.75">Good</option>
                                        <option value="0.5">Needs Improvement</option>
                                    </select>
                                </div>
                            </div>
                            <textarea 
                                class="implementation-notes mt-2 shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                rows="4"
                                placeholder="Specific notes about implementation"
                            ></textarea>
                            <div class="implementation-generated-comments mt-2 text-sm text-gray-600 italic"></div>
                        </div>
                    </div>
                </div>

                <!-- Total Score Display -->
                <div class="mt-6 bg-gray-100 p-4 rounded-lg">
                    <h3 class="text-lg font-bold mb-2">
                        Total Score: 
                        <span id="totalScore">0</span>/23 
                        (<span id="percentageScore">0%</span>)
                    </h3>
                    <div id="overallGrade" class="text-center font-semibold"></div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col md:flex-row gap-4 mt-6">
                <button 
                    id="generateComments" 
                    class="flex-1 bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                >
                    Generate Comments
                </button>
                <button 
                    id="calculateScore" 
                    class="flex-1 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                >
                    Calculate Score
                </button>
                <button 
                    id="exportRubric" 
                    class="flex-1 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                >
                    Export Rubric
                </button>
            </div>
        </div>
    </div>

    <script>
        // Comment Generation Templates
        const commentTemplates = {
            concept: {
                excellent: [
                    "Strong and well-defined project concept with clear purpose.",
                    "Innovative approach that effectively addresses user needs.",
                    "Demonstrates exceptional understanding of project goals."
                ],
                good: [
                    "Solid project concept with potential for further refinement.",
                    "Clear objectives, but could benefit from more innovative thinking.",
                    "Addresses core user needs with some room for improvement."
                ],
                improvement: [
                    "Project concept lacks clarity and requires significant development.",
                    "Needs a more focused and targeted approach to project goals.",
                    "Unclear value proposition that needs substantial reworking."
                ]
            },
            design: {
                excellent: [
                    "Exceptional user experience with intuitive design.",
                    "Visually appealing and highly functional interface.",
                    "Seamless interaction that enhances overall project value."
                ],
                good: [
                    "Solid design with good user experience.",
                    "Clean interface with some areas for potential improvement.",
                    "Functional design that meets basic user expectations."
                ],
                improvement: [
                    "Design requires significant overhaul to improve usability.",
                    "Confusing user interface that hinders project effectiveness.",
                    "Lacks coherent design strategy and user-centered approach."
                ]
            },
            implementation: {
                excellent: [
                    "Robust implementation with high-quality, efficient code.",
                    "Excellent error handling and comprehensive documentation.",
                    "Demonstrates advanced technical proficiency."
                ],
                good: [
                    "Solid implementation with some areas for optimization.",
                    "Functional code with moderate complexity.",
                    "Adequate documentation and error management."
                ],
                improvement: [
                    "Implementation shows significant technical challenges.",
                    "Code requires substantial refactoring and optimization.",
                    "Documentation is incomplete and error handling is insufficient."
                ]
            }
        };

        // Utility function to get section elements
        function getSectionElements(section) {
            return {
                scoreSelect: document.querySelector(`.${section}-score`),
                subcriteriaSelects: document.querySelectorAll(`.${section}-subcriteria`),
                notes: document.querySelector(`.${section}-notes`),
                generatedComments: document.querySelector(`.${section}-generated-comments`)
            };
        }

        // Calculate Total Score
        function calculateTotalScore() {
            let total = 0;
            const sections = ['concept', 'design', 'implementation'];

            sections.forEach(section => {
                const elements = getSectionElements(section);
                const sectionScore = parseFloat(elements.scoreSelect.value);
                total += sectionScore;
            });

            // Update Total Score and Percentage
            const totalScoreElement = document.getElementById('totalScore');
            const percentageScoreElement = document.getElementById('percentageScore');
            const overallGradeElement = document.getElementById('overallGrade');

            totalScoreElement.textContent = total.toFixed(2);
            const percentage = (total / 23) * 100;
            percentageScoreElement.textContent = `${percentage.toFixed(2)}%`;

            // Determine Overall Grade
            let grade = '';
            if (percentage >= 90) {
                grade = 'A';
            } else if (percentage >= 80) {
                grade = 'B';
            } else if (percentage >= 70) {
                grade = 'C';
            } else if (percentage >= 60) {
                grade = 'D';
            } else {
                grade = 'F';
            }
            overallGradeElement.textContent = `Overall Grade: ${grade}`;
        }

        // Generate Comments
        function generateComments() {
            const sections = ['concept', 'design', 'implementation'];

            sections.forEach(section => {
                const elements = getSectionElements(section);
                const subcriteria = Array.from(elements.subcriteriaSelects).map(select => parseFloat(select.value));
                const average = subcriteria.reduce((a, b) => a + b, 0) / subcriteria.length;

                let commentLevel = '';
                if (average >= 2.5) {
                    commentLevel = 'excellent';
                } else if (average >= 1.5) {
                    commentLevel = 'good';
                } else {
                    commentLevel = 'improvement';
                }

                const comments = commentTemplates[section][commentLevel];
                const randomComment = comments[Math.floor(Math.random() * comments.length)];

                elements.generatedComments.textContent = randomComment;
            });
        }

        // Export Rubric as Image
        function exportRubric() {
            const rubric = document.querySelector('.bg-white');
            html2canvas(rubric, { scale: 2 }).then(canvas => {
                const link = document.createElement('a');
                link.download = `${document.getElementById('projectName').value || 'rubric'}_rubric.png`;
                link.href = canvas.toDataURL();
                link.click();
            }).catch(err => {
                console.error('Error exporting rubric:', err);
                alert('An error occurred while exporting the rubric.');
            });
        }

        // Event Listeners
        document.getElementById('calculateScore').addEventListener('click', calculateTotalScore);
        document.getElementById('generateComments').addEventListener('click', generateComments);
        document.getElementById('exportRubric').addEventListener('click', exportRubric);

        // Optional: Automatically calculate score when any scoring dropdown changes
        document.querySelectorAll('.scoring-dropdown').forEach(dropdown => {
            dropdown.addEventListener('change', calculateTotalScore);
        });
    </script>
</body>
</html>
